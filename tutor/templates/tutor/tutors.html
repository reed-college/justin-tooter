{% extends "tutor/base.html" %}
{% block title %}
Available Tutors
{% endblock %}

{% block head %}
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'paneitystyle.css' %}" />
{% endblock %}

{% block content %}
    {% load tutor_extras %}
    <h3 style="padding-bottom: 30px"> {{course_name}} Tutors:</h3>
    <div id="tutorsdiv">
    {# prints the first and last name of each tutor #}
        <table class="table">
        {% for tutor in tutors %}
            <tr>
            {% if tutor.user.first_name or tutor.user.last_name %}
                <td>
                    {{tutor.user.first_name}}
                    {{tutor.user.last_name}}
                </td>
            {% else %}
                <td>
                    {{tutor.user.username}}
                </td>
            {% endif %}
                <td>
                    <a href="{% url 'dialogs_detail' tutor.user.username %}">Chat with me!</a>
                </td>
                <td>
                    <a href="mailto:{{tutor.user.email}}">Email me!</a>
                </td>
                <td class="last-log">
                    <small>
                        Last Login: 
                        {% if not tutor.user.last_login %}
                            Never

                        {% comment %}
                        This checks if a tutor has logged in in the
                        last day.
                        It uses a function in 
                        tutor/templatetags/tutor_extras.py
                        {% endcomment %}
                        {% elif tutor.user.last_login|add:day|datetime_ge:dnow %} 
                            {{tutor.user.last_login|timesince}} ago

                        {% comment %}
                        Similar to the last clause, this one checks 
                        if they have logged in within the last week
                        {% endcomment %}
                        {% elif tutor.user.last_login|add:week|datetime_ge:dnow %} 
                            {{tutor.user.last_login|date:"l"}}
                        {% else %}
                            {{tutor.user.last_login|date:"m/d/y"}}
                        {% endif %}
                    </small> 
                </td>
            </tr>
        {% endfor %}
        </table>
    </div>
{% endblock %}
