{% extends "tutor/base.html" %}

{% block head %}
    <title>
        Paneity - Available Tutors
    </title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'paneitystyle.css' %}" />
{% endblock %}

{% block content %}
    {% load tutor_extras %}
    <h3 style="padding-bottom: 30px"> {{course_name}} Tutors:</h3>

    <div id="tutorsdiv" class="container-fluid">
    {# prints the first and last name of each tutor #}
    {% for tutor in tutors %}
        <div class="row">
            <div class="col-lg-">
            {% if tutor.user.first_name or tutor.user.last_name %}
                {{tutor.user.first_name}}
                {{tutor.user.last_name}}
            {% else %}
                {{tutor.user.username}}
            {% endif %}
            </div>
            <div class="col-lg-3">
                <a href="{% url 'dialogs_detail' tutor.user.username %}">Chat with me!</a>
            </div>
            <div class="col-lg-2">
                <a href="mailto:{{tutor.user.email}}">Email me!</a>
            </div>
            <div class="col-lg-5 last-log">
                <small>
                    Last Login: 
                    {% comment %}
                    This checks if a tutor has logged in in the
                    last day.
                    It uses a function in 
                    tutor/templatetags/tutor_extras.py
                    {% endcomment %}
                    {% if tutor.user.last_login|add:day|datetime_ge:dnow %} 
                        {{tutor.user.last_login|timesince}} ago
                    {% comment %}
                    Similar to the last clause, this one checks 
                    if they have logged in within the last week
                    {% endcomment %}
                    {% elif tutor.user.last_login|add:week|datetime_ge:dnow %} 
                        {{tutor.user.last_login|date:"l"}}
                    {% else %}
                        {{tutor.user.last_login|date:"m/d/y"}}
                    {% endif %}
                </small> 
            </div>
        </div>
    {% endfor %}
    </div>
{% endblock %}
